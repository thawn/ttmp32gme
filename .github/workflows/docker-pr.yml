name: Docker PR Build

on:
  pull_request:
    branches: [ main, master, develop ]
    paths:
      - 'resources/build_assets/docker/**'
      - 'docker-compose.yml'
      - 'build-docker.sh'
      - 'docker-push.sh'
      - 'src/**'
      - 'pyproject.toml'
      - '.github/workflows/docker-*.yml'

permissions:
  contents: read
  packages: write

jobs:
  docker-build-and-test:
    name: Build and Test Docker Image
    uses: ./.github/workflows/docker-build-test.yml
    with:
      push_to_registry: false
      push_to_ghcr: true
      image_tag: pr-${{ github.event.pull_request.number }}
